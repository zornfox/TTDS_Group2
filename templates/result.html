{% extends "layout.html" %}

{% block head %}
    <title>{{input}} - Search</title>
{% endblock %}
{% block content %}


    <div class="contentBox">
        <div class="menuTypeList">

            <div class="boxcontainer">
                <form action="#" method="POST" id="searchForm">
                    <div class="input-group">
                        <div class="searchbox">
                            <input type="hidden" id="w2v" name="w2v" value={{w2v}}>
                            <button type="button"  class="btn btn-default dropdown-toggle" data-toggle="dropdown" style=" height:100%; vertical-align: middle;
                            float: left;width:92.13px; ">
                                {% if w2v == 'T' %}
                                    Mode2
                                {% else %}
                                    Mode1
                                {% endif %}
                                <span class="caret"></span>
                            </button>
                        
                            <ul class="dropdown-menu">
                                <li  onclick="select_Algorithm('F')" style="padding: 10px 10px;"> Mode1</li>
                                <li  onclick="select_Algorithm('T')" style="padding: 10px 10px;"> Mode2</li>
                            </ul>
                        </div>

                        <div class="searchbox">
                            <input type="hidden" id="dataset" name="dataset" value={{dataset}}>
                            <button type="button"  class="btn btn-default dropdown-toggle" data-toggle="dropdown" style=" height:100%; vertical-align: middle;
                            float: left; width:99.7px;">
                                {% if dataset == 'poynter' %}
                                    Poynter
                                {% elif   dataset == 'cord19'%}
                                    Papers
                                {% else %}
                                    Both
                                {% endif %}
                                <span class="caret"></span>
                            </button>
                        
                            <ul class="dropdown-menu">
                                <li  onclick="selection('poynter')" style="padding: 10px 10px;">Poynter</li>
                                <li  onclick="selection('cord19')" style="padding: 10px 10px;">Papers</li>
                                <li  onclick="selection('all')" style="padding: 10px 10px;">Both</li>
                            </ul>
                        </div>
                        
                        <input class="searchtxt" id="searchbar" type="text" name="txt" placeholder="Search" value="{{input}}" required>
                        <button type="button" onclick="clearThis()" class="clear">
                            <i class="fas fa-times"></i>
                        </button>
                        <button type="submit" class="searchbtn">
                            <i class="fas fa-search"></i>
                        </button>

                    </div>
                </form>
            </div>
            <h6 style=color:gray> <div style="padding-left:43px;font-size: small;">Note: Searching Mode Selection: Mode1 -> TF-IDF ONLY </div></h6>
            <h6 style=color:gray><div style="padding-left:250px;font-size: small;">Mode2 -> TF-IDF with W2V</div></h6>


            {%if not found%}
                <h1 class="finalresult">No results was found for "{{input}}".</h1>
            {% else %}

                <ul class="menuList">

                    {% for txt,url,src,region,titles in pagination.items %}
                        <li class="clearfix">
                            <div class="listDetails">
                                    
                                {% if url != None %}
                                    <h2><a class="surplus" href={{url}} target="_blank">{{titles}}</a></h2>
                                {% else %}
                                    <h2><a class="surplus" href="https://scholar.google.com/scholar?hl=en&as_sdt=0%2C5&q={{titles}}" target="_blank">{{titles}}</a></h2>
                                {% endif %}
                                <!--redirect to the orginal url on a new page when user click the text-->
                                
                                <p>{{txt}}</a>
                                {% if src==100 %}
                                    <p class="score">Similarity: 100%</p>
                                {% else %}
                                    <p class="score">Similarity: {{src}}%</p>
                                {% endif %}

                                <span class="time">From: {{region}}</span>

                            </div>
                        </li>
                    {% endfor %}

                </ul>
                <div class="paging">
                    {% if pagination.has_prev  %}
                        <span> <a href="?page={{ pagination.prev_num }}">Last Page </a></span>
                    {% endif %}
                    {% for page in pagination.iter_pages() %}
                        {% if page %}
                            {% if page != pagination.page %}
                                <a href="?page={{ page }}">{{ page }}</a>
                            {% else %}
                                <a  class="activate">{{ page }}</a>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                    {% if pagination.has_next  %}
                    <span class="nextPage"><a href="?page={{pagination.next_num}}">Next Page</a></span>
                    {% endif %}
                    <span>Showing {{(pagination.page-1)*pagination.page_size + 1}}-{{pagination.page*pagination.page_size}} of {{pagination.total}} items</span>
                </div>

            {% endif%}

        </div>
    </div>


{% endblock %}